/* --- LAYOUT TỔNG --- */
.incident-container {
  display: flex;
  height: calc(100vh - 80px);
  background: #f0f2f5;
  gap: 15px;
  overflow: hidden;
}

/* --- LIST PANEL --- */
.list-panel {
  width: 350px;
  background: white;
  border-right: 1px solid #ddd;
  display: flex; flex-direction: column; flex-shrink: 0;
}
.panel-header { padding: 15px; border-bottom: 1px solid #eee; }
.panel-header h3 { margin: 0; font-size: 16px; color: #333; }

.incident-list { flex: 1; overflow-y: auto; }
.incident-card {
  display: flex; padding: 12px; border-bottom: 1px solid #f0f0f0; 
  cursor: pointer; transition: 0.2s; border-left: 4px solid transparent;
}
.incident-card:hover { background: #f9f9f9; }
.incident-card.active { background: #e6f7ff; border-left-color: #1890ff; }

.card-thumb { 
  width: 60px; height: 60px; margin-right: 10px; border-radius: 6px; 
  overflow: hidden; background: #eee; flex-shrink: 0;
}
.card-thumb img { width: 100%; height: 100%; object-fit: cover; }

.card-info { flex: 1; overflow: hidden; display: flex; flex-direction: column; justify-content: center; }
.card-title { margin: 0 0 5px; font-size: 14px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.card-addr { font-size: 12px; color: #888; margin-bottom: 5px; }

.status-badge { font-size: 10px; padding: 2px 6px; border-radius: 4px; font-weight: 600; text-transform: uppercase; width: fit-content; }
.status-pending { background: #fff7e6; color: #fa8c16; } 
.status-processing { background: #e6f7ff; color: #1890ff; } 
.status-completed { background: #f6ffed; color: #52c41a; } 
.status-rejected { background: #fff1f0; color: #ff4d4f; } 

/* --- DETAIL PANEL --- */
.detail-panel { 
  flex: 1; background: white; border-radius: 8px; 
  margin-right: 15px; overflow-y: auto; padding: 20px; 
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}
.empty-state { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: #999; }
.detail-top { display: flex; gap: 20px; margin-bottom: 20px; }

/* IMAGE GALLERY */
.image-gallery { width: 320px; flex-shrink: 0; display: flex; flex-direction: column; gap: 10px; }

.main-img-box {
  width: 100%; height: 220px; border-radius: 8px; overflow: hidden;
  background: #f0f0f0; border: 1px solid #e0e0e0;
}
.main-img-box img { width: 100%; height: 100%; object-fit: cover; }

.sub-images { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 5px; }
.sub-images::-webkit-scrollbar { height: 4px; }
.sub-images::-webkit-scrollbar-thumb { background: #ccc; border-radius: 4px; }

.sub-images img {
  width: 70px; height: 70px; border-radius: 6px; object-fit: cover;
  cursor: pointer; border: 2px solid transparent; opacity: 0.7; transition: all 0.2s;
  flex-shrink: 0;
}
.sub-images img:hover { border-color: #1890ff; opacity: 1; transform: translateY(-2px); }

/* Class active cho thumbnail */
.sub-images img.active-thumb {
  border-color: #1890ff;
  opacity: 1;
  transform: translateY(-2px);
  box-shadow: 0 2px 5px rgba(24, 144, 255, 0.3);
}

/* INFO BOX */
.info-box { flex: 1; }
.info-box h2 { margin: 0 0 10px; color: #333; font-size: 20px; }
.meta-row { display: flex; gap: 15px; color: #888; font-size: 13px; margin-bottom: 15px; }
.desc-box { background: #fafafa; padding: 15px; border-radius: 6px; margin-bottom: 15px; font-size: 14px; line-height: 1.6; border: 1px solid #eee; }
.addr-box { font-weight: 500; color: #555; font-size: 14px; }
.text-red { color: #ff4d4f; margin-right: 5px;}

/* --- ACTION ZONE --- */
.action-zone { background: #f9f9f9; padding: 20px; border-radius: 8px; border: 1px solid #eee; }
.action-zone h3 { margin-top: 0; font-size: 16px; margin-bottom: 15px; color: #333; }

.control-row { display: flex; gap: 20px; margin-bottom: 15px; }
.control-group { flex: 1; display: flex; flex-direction: column; gap: 6px; }
.control-group label { font-size: 13px; font-weight: 600; color: #555; }
.control-group select, .control-group textarea { 
  padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; outline: none;
}
.control-group select:focus, .control-group textarea:focus { border-color: #1890ff; }

/* Duplicate List */
.duplicate-check { background: #fffbe6; border: 1px solid #ffe58f; padding: 15px; border-radius: 6px; margin-bottom: 20px; }
.dup-title { font-weight: bold; color: #fa8c16; margin-bottom: 10px; font-size: 14px; }
.dup-list { display: flex; flex-direction: column; gap: 8px; margin-bottom: 8px; }
.dup-item { display: flex; align-items: center; gap: 10px; padding: 8px; background: white; border-radius: 4px; border: 1px solid #eee; font-size: 13px; }
.badge-dup { background: #eee; font-size: 10px; padding: 2px 6px; border-radius: 4px; margin-left: auto; }
.hint-text { font-size: 12px; color: #888; font-style: italic; }

/* Buttons */
.btn-row { display: flex; justify-content: flex-end; gap: 10px; margin-top: 10px; }
button { padding: 10px 20px; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; transition: 0.2s; font-size: 14px; }
.btn-approve { background: #52c41a; color: white; } .btn-approve:hover { background: #389e0d; }
.btn-reject { background: #fff1f0; color: #ff4d4f; border: 1px solid #ffccc7; } .btn-reject:hover { background: #ffccc7; }
.btn-process { background: #1890ff; color: white; } .btn-process:hover { background: #096dd9; }
.btn-complete { background: #52c41a; color: white; } .btn-complete:hover { background: #389e0d; }

.status-text-bold { font-weight: bold; color: #1890ff; }

@media (max-width: 900px) {
  .incident-container { flex-direction: column; overflow-y: auto; height: auto; }
  .list-panel { width: 100%; height: 300px; }
  .detail-panel { margin-right: 0; }
  .detail-top { flex-direction: column; }
  .image-gallery { width: 100%; }
}
/* ... Giữ nguyên các phần Layout, List Panel, Detail Top cũ ... */

/* --- PHẦN GỢI Ý TRÙNG LẶP (Được làm mới) --- */
.duplicate-section {
  background-color: #fffbe6;
  border: 1px solid #ffe58f;
  border-radius: 8px;
  padding: 15px;
  margin-bottom: 20px;
  animation: fadeIn 0.3s;
}

.dup-header {
  font-weight: 700;
  color: #fa8c16;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.dup-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 200px;
  overflow-y: auto;
}

.dup-item {
  display: flex;
  align-items: center;
  background: white;
  padding: 10px;
  border-radius: 6px;
  border: 1px solid #eee;
  transition: 0.2s;
}
.dup-item:hover {
  border-color: #fa8c16;
  background-color: #fffcf5;
}

.dup-info { flex: 1; margin-left: 10px; }
.dup-title { font-weight: 600; font-size: 13px; color: #333; margin-bottom: 2px; }
.dup-meta { font-size: 11px; color: #888; }

.badge-dup {
  background: #f5f5f5; color: #666; 
  font-size: 10px; padding: 2px 6px; 
  border-radius: 4px; border: 1px solid #ddd;
}

.merge-hint {
  font-size: 12px; color: #888; margin-top: 10px; font-style: italic;
}

/* Custom Checkbox */
.checkbox-container { position: relative; display: inline-block; width: 18px; height: 18px; cursor: pointer; }
.checkbox-container input { opacity: 0; width: 0; height: 0; }
.checkmark { position: absolute; top: 0; left: 0; height: 18px; width: 18px; background-color: #eee; border-radius: 3px; }
.checkbox-container:hover input ~ .checkmark { background-color: #ccc; }
.checkbox-container input:checked ~ .checkmark { background-color: #1890ff; }
.checkmark:after { content: ""; position: absolute; display: none; }
.checkbox-container input:checked ~ .checkmark:after { display: block; }
.checkbox-container .checkmark:after { left: 6px; top: 2px; width: 4px; height: 9px; border: solid white; border-width: 0 2px 2px 0; transform: rotate(45deg); }


/* --- BUTTON STYLES (Dùng Flexbox và Icon) --- */
.btn-row {
  display: flex; justify-content: flex-end; gap: 12px; margin-top: 20px;
}

.btn {
  padding: 10px 20px;
  border: none;
  border-radius: 6px;
  font-weight: 600;
  font-size: 14px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: all 0.2s;
  box-shadow: 0 2px 0 rgba(0,0,0,0.045);
}

.btn:active { transform: translateY(1px); box-shadow: none; }

/* Màu sắc từng nút */
.btn-approve { background-color: #52c41a; color: white; }
.btn-approve:hover { background-color: #389e0d; }

.btn-reject { background-color: #fff1f0; color: #ff4d4f; border: 1px solid #ffa39e; }
.btn-reject:hover { background-color: #ffccc7; }

.btn-process { background-color: #1890ff; color: white; }
.btn-process:hover { background-color: #096dd9; }

.btn-complete { background-color: #52c41a; color: white; }
.btn-complete:hover { background-color: #389e0d; }

@keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
/* Badge Vote Count */
/* --- GIỮ NGUYÊN CSS CŨ CỦA BẠN TỪ DÒNG 1 ĐẾN CUỐI, CHỈ THÊM ĐOẠN SAU VÀO CUỐI FILE --- */

/* Badge hiển thị số lượng vote/trùng lặp */
.title-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  margin-bottom: 5px;
}

.card-title {
  margin: 0;
  font-size: 14px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1; /* Để title chiếm hết chỗ trống còn lại */
}

.vote-badge {
  background-color: #ff4d4f;
  color: white;
  font-size: 10px;
  font-weight: bold;
  padding: 1px 6px;
  border-radius: 10px;
  margin-left: 8px;
  box-shadow: 0 2px 4px rgba(255, 77, 79, 0.3);
  display: inline-flex;
  align-items: center;
  flex-shrink: 0; /* Không bị co lại */
}

/* Khung thông báo khi sự cố đã được xử lý */
.alert-processed {
  background-color: #f6ffed;
  border: 1px solid #b7eb8f;
  padding: 15px;
  border-radius: 6px;
  color: #389e0d;
  font-size: 14px;
  display: flex;
  flex-direction: column;
  gap: 5px;
  margin-bottom: 20px;
  animation: fadeIn 0.3s;
}

.alert-processed i {
  font-size: 18px;
  margin-right: 5px;
}

.alert-rejected {
  background-color: #fff1f0;
  border-color: #ffa39e;
  color: #cf1322;
}
/* ... CSS CŨ GIỮ NGUYÊN ... */

/* --- CSS CHO MODAL NHỎ (CONFIRM / ALERT) --- */
.modal-backdrop {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0,0,0,0.5); display: flex; justify-content: center; align-items: center;
  animation: fadeIn 0.2s;
}

.modal-content-small {
  background: white; width: 380px; padding: 30px; border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.2); text-align: center;
  animation: slideUp 0.3s;
}

.modal-icon {
  width: 60px; height: 60px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 28px; margin: 0 auto 20px;
}

.icon-info { background: #e6f7ff; color: #1890ff; }
.icon-warning { background: #fff7e6; color: #fa8c16; }
.icon-success { background: #f6ffed; color: #52c41a; }
.icon-error { background: #fff1f0; color: #ff4d4f; }

.modal-title { margin: 0 0 10px; font-size: 18px; color: #333; font-weight: 700; }
.modal-desc { margin: 0 0 25px; color: #666; font-size: 14px; line-height: 1.5; }

.modal-actions { display: flex; gap: 10px; justify-content: center; }

.btn-modal {
  padding: 10px 20px; border-radius: 6px; font-weight: 600; cursor: pointer; border: none; flex: 1; font-size: 14px; transition: 0.2s;
}
.btn-cancel { background: #f5f5f5; color: #666; } .btn-cancel:hover { background: #e8e8e8; }
.btn-primary { background: #1890ff; color: white; } .btn-primary:hover { background: #096dd9; }
.btn-danger { background: #ff4d4f; color: white; } .btn-danger:hover { background: #cf1322; }

@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

/* ... CSS cũ giữ nguyên ... */

.transfer-section {
  background: #f0f5ff;
  border: 1px solid #d6e4ff;
  padding: 15px;
  border-radius: 6px;
  margin-bottom: 15px;
}

.btn-icon-only {
  width: 42px;
  height: 42px; 
  background: #1890ff;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: 0.2s;
  box-shadow: 0 2px 0 rgba(0,0,0,0.045);
}

.btn-icon-only:hover {
  background: #096dd9;
  transform: translateY(-1px);
}

.btn-icon-only:active {
  transform: translateY(1px);
}

@media (max-width: 768px) {
  .control-row { flex-direction: column; gap: 10px; }
  .btn-row { flex-direction: column; }
  .btn { width: 100%; justify-content: center; }
}